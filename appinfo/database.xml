<?xml version="1.0" encoding="UTF-8" ?>
<database>
    <name>*dbname*</name>
    <create>true</create>
    <overwrite>false</overwrite>
    <charset>utf8</charset>
    <table>
        <name>*dbprefix*analytics_dataset</name>
        <declaration>
            <field>
                <name>id</name>
                <type>integer</type>
                <notnull>true</notnull>
                <autoincrement>true</autoincrement>
                <primary>true</primary>
            </field>
            <field>
                <name>name</name>
                <type>text</type>
                <notnull>true</notnull>
                <length>64</length>
            </field>
            <field>
                <name>type</name>
                <type>integer</type>
                <notnull>false</notnull>
            </field>
            <field>
                <name>user_id</name>
                <type>text</type>
                <notnull>true</notnull>
                <length>64</length>
            </field>
            <field>
                <name>link</name>
                <type>text</type>
                <notnull>false</notnull>
                <length>256</length>
            </field>
            <field>
                <name>visualization</name>
                <type>text</type>
                <notnull>false</notnull>
                <length>10</length>
            </field>
            <field>
                <name>chart</name>
                <type>text</type>
                <notnull>false</notnull>
                <length>256</length>
            </field>
            <field>
                <name>parent</name>
                <type>integer</type>
                <notnull>false</notnull>
            </field>
            <field>
                <name>dimension1</name>
                <type>text</type>
                <notnull>false</notnull>
                <length>64</length>
            </field>
            <field>
                <name>dimension2</name>
                <type>text</type>
                <notnull>false</notnull>
                <length>64</length>
            </field>
            <field>
                <name>dimension3</name>
                <type>text</type>
                <notnull>false</notnull>
                <length>64</length>
            </field>
            <index>
                <name>dataset_user_id_idx</name>
                <field>
                    <name>user_id</name>
                </field>
            </index>
        </declaration>
    </table>
    <table>
        <name>*dbprefix*analytics_facts</name>
        <declaration>
            <field>
                <name>id</name>
                <type>integer</type>
                <notnull>true</notnull>
                <autoincrement>true</autoincrement>
                <primary>true</primary>
            </field>
            <field>
                <name>user_id</name>
                <type>text</type>
                <notnull>true</notnull>
                <length>64</length>
            </field>
            <field>
                <name>dataset</name>
                <type>integer</type>
                <notnull>true</notnull>
            </field>
            <field>
                <name>dimension1</name>
                <type>text</type>
                <notnull>false</notnull>
                <length>64</length>
            </field>
            <field>
                <name>dimension2</name>
                <type>text</type>
                <notnull>false</notnull>
                <length>64</length>
            </field>
            <field>
                <name>dimension3</name>
                <type>numeric</type>
                <notnull>false</notnull>
                <precision>15</precision>
                <scale>2</scale>
            </field>
            <index>
                <name>facts_dataset_idx</name>
                <field>
                    <name>dataset</name>
                </field>
            </index>
        </declaration>
    </table>
    <table>
        <name>*dbprefix*analytics_share</name>
        <declaration>
            <field>
                <name>id</name>
                <type>integer</type>
                <notnull>true</notnull>
                <autoincrement>true</autoincrement>
                <primary>true</primary>
            </field>
            <field>
                <name>dataset</name>
                <type>integer</type>
                <notnull>true</notnull>
            </field>
            <field>
                <name>type</name>
                <type>integer</type>
                <notnull>false</notnull>
            </field>
            <field>
                <name>uid_owner</name>
                <type>text</type>
                <notnull>false</notnull>
                <length>64</length>
            </field>
            <field>
                <name>uid_initiator</name>
                <type>text</type>
                <notnull>true</notnull>
                <length>64</length>
            </field>
            <field>
                <name>permissions</name>
                <type>integer</type>
                <notnull>false</notnull>
            </field>
            <field>
                <name>token</name>
                <type>text</type>
                <notnull>false</notnull>
                <length>32</length>
            </field>
            <field>
                <name>password</name>
                <type>text</type>
                <notnull>false</notnull>
                <length>64</length>
            </field>
            <index>
                <name>share_dataset_idx</name>
                <field>
                    <name>dataset</name>
                </field>
            </index>
            <index>
                <name>share_uid_owner_idx</name>
                <field>
                    <name>uid_owner</name>
                </field>
            </index>
            <index>
                <name>share_token_idx</name>
                <field>
                    <name>token</name>
                </field>
            </index>
        </declaration>
    </table>
</database>